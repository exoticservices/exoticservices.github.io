<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chicken Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
            margin: 0;
            padding: 20px;
        }

        .game-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .balance {
            font-size: 1.5em;
            margin: 20px 0;
        }

        .controls {
            margin: 20px 0;
        }

        .multiplier {
            font-size: 3em;
            margin: 40px 0;
            transition: all 0.1s ease;
        }

        .btn {
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }

        .btn-danger {
            background: #f44336;
        }

        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
        }

        .popup-content {
            background: white;
            color: black;
            margin: 15% auto;
            padding: 20px;
            width: 300px;
            border-radius: 5px;
        }

        .history {
            margin-top: 20px;
            text-align: left;
        }

        @keyframes crash {
            0% { transform: scale(1); }
            100% { transform: scale(1.2); }
        }

        .crashed {
            animation: crash 0.5s;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Chicken Game</h1>
        
        <div class="balance">
            Balance: <span id="balance">0.00</span> BTC
            <button class="btn" onclick="showAddFunds()">Add Funds</button>
        </div>

        <div class="controls">
            <input type="number" id="betAmount" placeholder="Bet amount" step="0.01" min="0.01">
            <button class="btn" onclick="placeBet()">Place Bet</button>
        </div>

        <div id="multiplier" class="multiplier">1.00x</div>
        <button class="btn btn-danger" onclick="cashOut()" disabled>Cash Out</button>

        <div class="history">
            <h3>History</h3>
            <ul id="historyList"></ul>
        </div>
    </div>

    <!-- Add Funds Popup -->
    <div id="addFundsPopup" class="popup">
        <div class="popup-content">
            <h2>Add Funds</h2>
            <input type="number" id="fundAmount" placeholder="Amount" step="0.01" min="0.01">
            <button class="btn" onclick="addFunds()">Add</button>
            <button class="btn" onclick="closePopup()">Cancel</button>
        </div>
    </div>

    <script>
        let balance = 0;
        let currentBet = 0;
        let gameInterval;
        let crashValue = 1;
        let isGameRunning = false;

        const historyList = document.getElementById('historyList');

        function showAddFunds() {
            document.getElementById('addFundsPopup').style.display = 'block';
        }

        function closePopup() {
            document.getElementById('addFundsPopup').style.display = 'none';
        }

        function addFunds() {
            const amount = parseFloat(document.getElementById('fundAmount').value);
            if (amount > 0) {
                balance += amount;
                updateBalance();
                closePopup();
                document.getElementById('fundAmount').value = '';
            }
        }

        function updateBalance() {
            document.getElementById('balance').textContent = balance.toFixed(2);
        }

        function placeBet() {
            if (isGameRunning) return;

            const bet = parseFloat(document.getElementById('betAmount').value);
            if (bet <= 0 || bet > balance) return;

            currentBet = bet;
            balance -= currentBet;
            updateBalance();
            startGame();
        }

        function startGame() {
            isGameRunning = true;
            document.querySelector('.btn-danger').disabled = false;
            crashValue = 1;
            const multiplierElement = document.getElementById('multiplier');
            multiplierElement.textContent = '1.00x';
            multiplierElement.classList.remove('crashed');

            const crashPoint = Math.random() * 4 + 1; // Random crash between 1x-5x
            let speed = 0.02;

            gameInterval = setInterval(() => {
                crashValue += speed;
                speed *= 1.05; // Exponential growth
                multiplierElement.textContent = crashValue.toFixed(2) + 'x';

                if (crashValue >= crashPoint) {
                    endGame('crash');
                }
            }, 50);
        }

        function cashOut() {
            if (!isGameRunning) return;
            endGame('cashout');
        }

        function endGame(reason) {
            clearInterval(gameInterval);
            isGameRunning = false;
            document.querySelector('.btn-danger').disabled = true;
            const multiplierElement = document.getElementById('multiplier');

            if (reason === 'crash') {
                multiplierElement.classList.add('crashed');
                addToHistory(`Crashed at ${crashValue.toFixed(2)}x - Lost ${currentBet.toFixed(2)} BTC`);
                currentBet = 0;
            } else {
                const winnings = currentBet * crashValue;
                balance += winnings;
                updateBalance();
                addToHistory(`Cashed out at ${crashValue.toFixed(2)}x - Won ${winnings.toFixed(2)} BTC`);
                currentBet = 0;
            }
        }

        function addToHistory(text) {
            const li = document.createElement('li');
            li.textContent = text;
            historyList.prepend(li);
        }
    </script>
</body>
</html>
